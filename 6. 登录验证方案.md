##登录验证方案
### session登录验证
1、用户向服务器发送用户名和密码。

2、服务器验证通过后，在当前对话（session）里面保存相关数据，比如用户角色、登录时间等等。

3、服务器向用户返回一个 session_id，返回用户的 Cookie。

4、用户随后的每一次请求，都会通过 session_id 的 Cookie 传回服务器。

5、服务器收到 session_id，找到前期保存的数据，由此得知用户的身份。

#### session登录验证的缺点
1. session保存在服务端的进程中的栈中, 计算机会给Node.js分配进程, 每个进程的内存大小有限, 过大会挤爆内存
![](https://github.com/zenglinan/Node.js-note/img/1.jpg)
2. 计算机对一个进程的内存有限制, 所以线上环境一般是多进程(将计算机的多个进程都分配给Node.js), 进程之间数据无法共享, 这样就可能导致先命中的进程1, 保存的session也在进程1, 然后下一次命中进程2, 无法读取进程1中的session
![](https://github.com/zenglinan/Node.js-note/img/2.jpg)
